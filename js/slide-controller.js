!function(a){function b(){this.popup=null,this.isPopup=a.opener,this.setupDone()&&(a.addEventListener("message",this.onMessage_.bind(this),!1),a.addEventListener("beforeunload",function(a){this.popup&&this.popup.close()}.bind(this),!1))}var c=location.protocol+"//"+location.host;b.PRESENTER_MODE_PARAM="presentme",b.prototype.setupDone=function(){for(var c,d=location.search.substring(1).split("&").map(function(a){return a.split("=")}),e=null,f=0;c=d[f];++f)if(c[0].toLowerCase()==b.PRESENTER_MODE_PARAM){e="true"==c[1];break}if(null!==e){if(localStorage.ENABLE_PRESENTOR_MODE=e,!a.history.replaceState)return location.replace(location.pathname),!1;a.history.replaceState({},"",location.pathname)}var g=localStorage.getItem("ENABLE_PRESENTOR_MODE");if(g&&JSON.parse(g)&&!this.isPopup){var h="menubar=no,location=yes,resizable=yes,scrollbars=no,status=no";this.popup=a.open(location.href,"mywindow",h),this.popup.addEventListener("load",function(a){var b=this.popup.document.createEvent("Event");b.initEvent("keydown",!0,!0),b.keyCode="P".charCodeAt(0),this.popup.document.dispatchEvent(b)}.bind(this),!1)}return!0},b.prototype.onMessage_=function(a){var b=a.data;if(a.origin!=c&&0!=c.indexOf("file://"))return void alert("Someone tried to postMessage from an unknown origin");if("keyCode"in b){var d=document.createEvent("Event");d.initEvent("keydown",!0,!0),d.keyCode=b.keyCode,document.dispatchEvent(d)}},b.prototype.sendMsg=function(b){this.isPopup&&a.opener.postMessage(b,"*")},a.SlideController=b}(window);