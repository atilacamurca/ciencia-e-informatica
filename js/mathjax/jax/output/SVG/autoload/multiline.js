MathJax.Hub.Register.StartupHook("SVG Jax Ready",function(){var a=MathJax.ElementJax.mml,b=MathJax.OutputJax.SVG,c=b.BBOX,d={newline:0,nobreak:1e6,goodbreak:[-200],badbreak:[200],auto:[0],toobig:800,nestfactor:400,spacefactor:-100,spaceoffset:2,spacelimit:1,fence:500,close:500},e={linebreakstyle:"after"};a.mrow.Augment({SVGmultiline:function(c){for(var f=this;f.inferred||f.parent&&"mrow"===f.parent.type&&1===f.parent.data.length;)f=f.parent;var g="math"===f.type&&"block"===f.Get("display")||"mtd"===f.type;f.isMultiline=!0;var h=this.getValues("linebreak","linebreakstyle","lineleading","linebreakmultchar","indentalign","indentshift","indentalignfirst","indentshiftfirst","indentalignlast","indentshiftlast");h.linebreakstyle===a.LINEBREAKSTYLE.INFIXLINEBREAKSTYLE&&(h.linebreakstyle=this.Get("infixlinebreakstyle")),h.lineleading=b.length2em(h.lineleading,1,.5),c=this.SVG(),b.linebreakWidth<b.BIGDIMEN?c.w=b.linebreakWidth:c.w=b.cwidth/b.em*1e3;for(var i={n:0,Y:0,scale:this.SVGgetScale(),isTop:g,values:{},VALUES:h},j=this.SVGgetAlign(i,{}),k=this.SVGgetShift(i,{},j),l=[],m={index:[],penalty:d.nobreak,w:0,W:k,shift:k,scanW:k,nest:0},n=!1;this.SVGbetterBreak(m,i)&&(m.scanW>=b.linebreakWidth||m.penalty==d.newline);)this.SVGaddLine(c,l,m.index,i,m.values,n),l=m.index.slice(0),n=!0,j=this.SVGgetAlign(i,m.values),k=this.SVGgetShift(i,m.values,j),j===a.INDENTALIGN.CENTER&&(k=0),m.W=m.shift=m.scanW=k,m.penalty=d.nobreak;return i.isLast=!0,this.SVGaddLine(c,l,[],i,e,n),this.SVGhandleSpace(c),this.SVGhandleColor(c),c.isMultiline=!0,this.SVGsaveData(c),c}}),a.mbase.Augment({SVGlinebreakPenalty:d,SVGbetterBreak:function(a,c){if(this.isToken)return!1;if(this.isEmbellished())return a.embellished=this,this.CoreMO().SVGbetterBreak(a,c);if(this.linebreakContainer)return!1;var e,f,g,h=a.index.slice(0),i=a.index.shift(),j=this.data.length,k=a.index.length>0,l=!1;for(null==i&&(i=-1),k||(i++,a.W+=a.w,a.w=0),g=a.scanW=a.W,a.nest++;j>i&&a.scanW<1.33*b.linebreakWidth;){if(this.data[i]){if(this.data[i].SVGbetterBreak(a,c)&&(l=!0,h=[i].concat(a.index),e=a.W,f=a.w,a.penalty===d.newline))return a.index=h,a.nest&&a.nest--,!0;g=k?a.scanW:this.SVGaddWidth(i,a,g)}a.index=[],i++,k=!1}return a.nest&&a.nest--,a.index=h,l&&(a.W=e),l},SVGaddWidth:function(a,b,c){if(this.data[a]){var d=this.data[a].SVGdata;c+=d.w+d.x,d.X&&(c+=d.X),b.W=b.scanW=c,b.w=0}return c},SVGaddLine:function(d,e,f,g,h,i){var j=c();g.first=i,g.last=!0,this.SVGmoveLine(e,f,j,g,h),j.Clean();var k=this.SVGgetAlign(g,h),l=this.SVGgetShift(g,h,k);if(l&&(k===a.INDENTALIGN.LEFT?j.x=l:k===a.INDENTALIGN.RIGHT&&(j.w+=l,j.r=j.w)),g.n>0){var m=b.FONTDATA.baselineskip*g.scale,n=(null==g.values.lineleading?g.VALUES:g.values).lineleading;g.Y-=Math.max(m,g.d+j.h+n)}d.Align(j,k,0,g.Y),g.d=j.d,g.values=h,g.n++},SVGgetAlign:function(b,c){var d,e=c,f=b.values,g=b.VALUES;return d=0===b.n?e.indentalignfirst||f.indentalignfirst||g.indentalignfirst:b.isLast?f.indentalignlast||g.indentalignlast:f.indentalign||g.indentalign,d===a.INDENTALIGN.INDENTALIGN&&(d=f.indentalign||g.indentalign),d===a.INDENTALIGN.AUTO&&(d=b.isTop?this.displayAlign:a.INDENTALIGN.LEFT),d},SVGgetShift:function(c,d,e){if(e===a.INDENTALIGN.CENTER)return 0;var f,g=d,h=c.values,i=c.VALUES;return f=0===c.n?g.indentshiftfirst||h.indentshiftfirst||i.indentshiftfirst:c.isLast?h.indentshiftlast||i.indentshiftlast:h.indentshift||i.indentshift,f===a.INDENTSHIFT.INDENTSHIFT&&(f=h.indentshift||i.indentshift),("auto"===f||""===f)&&(f=c.isTSop?this.displayIndent:"0"),b.length2em(f,0)},SVGmoveLine:function(a,b,c,d,e){var f=a[0],g=b[0];if(null==f&&(f=-1),null==g&&(g=this.data.length-1),f===g&&a.length>1)this.data[f].SVGmoveSlice(a.slice(1),b.slice(1),c,d,e,"paddingLeft");else{var h=d.last;for(d.last=!1;g>f;)this.data[f]&&(a.length<=1?this.data[f].SVGmove(c,d,e):this.data[f].SVGmoveSlice(a.slice(1),[],c,d,e,"paddingLeft")),f++,d.first=!1,a=[];d.last=h,this.data[f]&&(b.length<=1?this.data[f].SVGmove(c,d,e):this.data[f].SVGmoveSlice([],b.slice(1),c,d,e,"paddingRight"))}},SVGmoveSlice:function(a,b,d,e,f,g){var h=c();return this.SVGmoveLine(a,b,h,e,f),h.Clean(),this.SVGhandleColor(h),d.Add(h,d.w,0,!0),h},SVGmove:function(b,c,d){if(!c.first&&!c.last||c.first&&c.values.linebreakstyle===a.LINEBREAKSTYLE.BEFORE||c.last&&d.linebreakstyle===a.LINEBREAKSTYLE.AFTER){var e=this.toSVG(this.SVGdata.HW,this.SVGdata.D);c.last&&(e.x=0),(c.first||c.nextIsFirst)&&(delete c.nextIsFirst,e.X&&(e.X=0)),b.Add(e,b.w,0,!0)}else c.first?c.nextIsFirst=!0:delete c.nextIsFirst}}),a.mfenced.Augment({SVGbetterBreak:function(a,c){var e,f,g,h=a.index.slice(0),i=a.index.shift(),j=this.data.length,k=a.index.length>0,l=!1;if(null==i&&(i=-1),k||(i++,a.W+=a.w,a.w=0),g=a.scanW=a.W,a.nest++,!this.dataI){this.dataI=[],this.data.open&&this.dataI.push("open"),j&&this.dataI.push(0);for(var m=1;j>m;m++)this.data["sep"+m]&&this.dataI.push("sep"+m),this.dataI.push(m);this.data.close&&this.dataI.push("close")}for(j=this.dataI.length;j>i&&a.scanW<1.33*b.linebreakWidth;){var n=this.dataI[i];if(this.data[n]){if(this.data[n].SVGbetterBreak(a,c)&&(l=!0,h=[i].concat(a.index),e=a.W,f=a.w,a.penalty===d.newline))return a.index=h,a.nest&&a.nest--,!0;g=k?a.scanW:this.SVGaddWidth(i,a,g)}a.index=[],i++,k=!1}return a.nest&&a.nest--,a.index=h,l&&(a.W=e,a.w=f),l},SVGmoveLine:function(a,b,c,d,e){var f=a[0],g=b[0];if(null==f&&(f=-1),null==g&&(g=this.dataI.length-1),f===g&&a.length>1)this.data[this.dataI[f]].SVGmoveSlice(a.slice(1),b.slice(1),c,d,e,"paddingLeft");else{var h=d.last;d.last=!1;for(var i=this.dataI[f];g>f;)this.data[i]&&(a.length<=1?this.data[i].SVGmove(c,d,e):this.data[i].SVGmoveSlice(a.slice(1),[],c,d,e,"paddingLeft")),f++,i=this.dataI[f],d.first=!1,a=[];d.last=h,this.data[i]&&(b.length<=1?this.data[i].SVGmove(c,d,e):this.data[i].SVGmoveSlice([],b.slice(1),c,d,e,"paddingRight"))}}}),a.msubsup.Augment({SVGbetterBreak:function(a,b){if(!this.data[this.base])return!1;var c,e,f,g=a.index.slice(0),h=a.index.shift(),i=a.index.length>0,j=!1;return i||(a.W+=a.w,a.w=0),f=a.scanW=a.W,null==h&&(this.SVGdata.dw=this.SVGdata.w-this.data[this.base].SVGdata.w),this.data[this.base].SVGbetterBreak(a,b)&&(j=!0,g=[this.base].concat(a.index),c=a.W,e=a.w,a.penalty===d.newline&&(j=i=!0)),i||this.SVGaddWidth(this.base,a,f),a.scanW+=this.SVGdata.dw,a.W=a.scanW,a.index=[],j&&(a.W=c,a.w=e,a.index=g),j},SVGmoveLine:function(a,b,c,d,e){if(this.data[this.base]&&(a.length>1?this.data[this.base].SVGmoveSlice(a.slice(1),b.slice(1),c,d,e,"paddingLeft"):b.length<=1?this.data[this.base].SVGmove(c,d,e):this.data[this.base].SVGmoveSlice([],b.slice(1),c,d,e,"paddingRight")),0===b.length){var f,g=this.data[this.sup],h=this.data[this.sub],i=c.w;g&&(f=g.SVGdata,c.Add(g.toSVG(),i+(f.dx||0),f.dy)),h&&(f=h.SVGdata,c.Add(h.toSVG(),i+(f.dx||0),f.dy))}}}),a.mo.Augment({SVGbetterBreak:function(c,e){if(c.values&&c.values.last===this)return!1;var f=this.getValues("linebreak","linebreakstyle","lineleading","linebreakmultchar","indentalign","indentshift","indentalignfirst","indentshiftfirst","indentalignlast","indentshiftlast","texClass","fence");f.linebreakstyle===a.LINEBREAKSTYLE.INFIXLINEBREAKSTYLE&&(f.linebreakstyle=this.Get("infixlinebreakstyle")),f.texClass===a.TEXCLASS.OPEN&&c.nest++,f.texClass===a.TEXCLASS.CLOSE&&c.nest&&c.nest--;var g=c.scanW,h=c.embellished||this;delete c.embellished;var i=h.SVGdata,j=i.w+i.x;if(f.linebreakstyle===a.LINEBREAKSTYLE.AFTER&&(g+=j,j=0),g-c.shift===0)return!1;var k=b.linebreakWidth-g;if(0===e.n&&(f.indentshiftfirst!==e.VALUES.indentshiftfirst||f.indentalignfirst!==e.VALUES.indentalignfirst)){var l=this.SVGgetAlign(e,f),m=this.SVGgetShift(e,f,l);k+=c.shift-m}var n=Math.floor(k/b.linebreakWidth*1e3);0>n&&(n=d.toobig-3*n),f.fence&&(n+=d.fence),(f.linebreakstyle===a.LINEBREAKSTYLE.AFTER&&f.texClass===a.TEXCLASS.OPEN||f.texClass===a.TEXCLASS.CLOSE)&&(n+=d.close),n+=c.nest*d.nestfactor;var o=d[f.linebreak||a.LINEBREAK.AUTO];return o instanceof Array?n=Math.max(1,n+o[0]*c.nest):k>=0&&(n=o*c.nest),n>=c.penalty?!1:(c.penalty=n,c.values=f,c.W=g,c.w=j,f.lineleading=b.length2em(f.lineleading,e.VALUES.lineleading),f.last=this,!0)}}),a.mspace.Augment({SVGbetterBreak:function(c,e){if(c.values&&c.values.last===this)return!1;var f=this.getValues("linebreak"),g=f.linebreak;(!g||this.hasDimAttr())&&(g=a.LINEBREAK.AUTO);var h=c.scanW,i=this.SVGdata,j=i.w+i.x;if(h-c.shift===0)return!1;var k=b.linebreakWidth-h,l=Math.floor(k/b.linebreakWidth*1e3);0>l&&(l=d.toobig-3*l),l+=c.nest*d.nestfactor;var m=d[g];return g===a.LINEBREAK.AUTO&&j>=1e3*d.spacelimit&&(m=[(j+d.spaceoffset)*d.spacefactor]),m instanceof Array?l=Math.max(1,l+m[0]*c.nest):k>=0&&(l=m*c.nest),l>=c.penalty?!1:(c.penalty=l,c.values=f,c.W=h,c.w=j,f.lineleading=e.VALUES.lineleading,f.linebreakstyle="before",f.last=this,!0)}}),MathJax.Hub.Register.StartupHook("TeX mathchoice Ready",function(){a.TeXmathchoice.Augment({SVGbetterBreak:function(a,b){return this.Core().SVGbetterBreak(a,b)},SVGmoveLine:function(a,b,c,d,e){return this.Core().SVGmoveSlice(a,b,c,d,e)}})}),a.maction.Augment({SVGbetterBreak:function(a,b){return this.Core().SVGbetterBreak(a,b)},SVGmoveLine:function(a,b,c,d,e){return this.Core().SVGmoveSlice(a,b,c,d,e)}}),a.semantics.Augment({SVGbetterBreak:function(a,b){return this.data[0]?this.data[0].SVGbetterBreak(a,b):!1},SVGmoveLine:function(a,b,c,d,e){return this.data[0]?this.data[0].SVGmoveSlice(a,b,c,d,e):null}}),MathJax.Hub.Startup.signal.Post("SVG multiline Ready"),MathJax.Ajax.loadComplete(b.autoloadDir+"/multiline.js")});