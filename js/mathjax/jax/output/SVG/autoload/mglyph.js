MathJax.Hub.Register.StartupHook("SVG Jax Ready",function(){var a=MathJax.ElementJax.mml,b=MathJax.OutputJax.SVG,c=b.BBOX,d=MathJax.Localization,e="http://www.w3.org/1999/xlink";c.MGLYPH=c.Subclass({type:"image",removeable:!1,Init:function(a,c,d,f,g,h){null==h&&(h={});var i=1e3*a.width/b.em,j=1e3*a.height/b.em,k=0;""!==c&&(i=b.length2em(c,g,i)),""!==d&&(j=b.length2em(d,g,j)),""!==f&&f.match(/\d/)&&(k=b.length2em(f,g),h.y=-k),h.height=Math.floor(j),h.width=Math.floor(i),h.transform="translate(0,"+j+") matrix(1 0 0 -1 0 0)",h.preserveAspectRatio="none",this.SUPER(arguments).Init.call(this,h),this.element.setAttributeNS(e,"href",a.src),this.w=this.r=i,this.h=this.H=j+k,this.d=this.D=-k,this.l=0}}),a.mglyph.Augment({toSVG:function(b,e){this.SVGgetStyles();var f,g,h=this.SVG();this.SVGhandleSpace(h);var i=this.getValues("src","width","height","valign","alt");if(""===i.src){if(i=this.getValues("index","fontfamily"),i.index){e||(e=this.SVGgetScale());var j={};i.fontfamily&&(j["font-family"]=i.fontfamily),h.Add(c.TEXT(e,String.fromCharCode(i.index),j))}}else if(this.img||(this.img=a.mglyph.GLYPH[i.src]),this.img||(this.img=a.mglyph.GLYPH[i.src]={img:new Image,status:"pending"},f=this.img.img,f.onload=MathJax.Callback(["SVGimgLoaded",this]),f.onerror=MathJax.Callback(["SVGimgError",this]),f.src=i.src,MathJax.Hub.RestartAfter(f.onload)),"OK"!==this.img.status)g=a.Error(d._(["MathML","BadMglyph"],"Bad mglyph: %1",i.src),{mathsize:"75%"}),this.Append(g),h=g.toSVG(),this.data.pop();else{var k=this.SVGgetMu(h);h.Add(c.MGLYPH(this.img.img,i.width,i.height,i.valign,k,{src:i.src,alt:i.alt,title:i.alt}))}return h.Clean(),this.SVGhandleColor(h),this.SVGsaveData(h),h},SVGimgLoaded:function(a,b){"string"==typeof a&&(b=a),this.img.status=b||"OK"},SVGimgError:function(){this.img.img.onload("error")}},{GLYPH:{}}),MathJax.Hub.Startup.signal.Post("SVG mglyph Ready"),MathJax.Ajax.loadComplete(b.autoloadDir+"/mglyph.js")});