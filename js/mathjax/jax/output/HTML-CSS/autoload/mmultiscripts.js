MathJax.Hub.Register.StartupHook("HTML-CSS Jax Ready",function(){var a=MathJax.ElementJax.mml,b=MathJax.OutputJax["HTML-CSS"];a.mmultiscripts.Augment({toHTML:function(a,c,d){a=this.HTMLcreateSpan(a);var e,f=this.HTMLgetScale(),g=b.createStack(a),h=b.createBox(g);if(this.data[this.base]){var i=this.data[this.base].toHTML(h);null!=d?this.data[this.base].HTMLstretchV(h,c,d):null!=c&&this.data[this.base].HTMLstretchH(h,c),b.Measured(i,h)}else h.bbox=this.HTMLzeroBBox();for(var j=b.TeX.x_height*f,k=b.TeX.scriptspace*f*.75,l=this.HTMLgetScripts(g,k),m=l[0],n=l[1],o=l[2],p=l[3],q=this.HTMLgetScale(),r=1;r<this.data.length;r++)if(this.data[r]&&this.data[r].spanID){q=this.data[r].HTMLgetScale();break}var s,t=b.TeX.sup_drop*q,u=b.TeX.sub_drop*q,v=h.bbox.h-t,w=h.bbox.d+u,x=0;h.bbox.ic&&(x=h.bbox.ic),!this.data[this.base]||"mi"!==this.data[this.base].type&&"mo"!==this.data[this.base].type||1!==this.data[this.base].data.join("").length||1!==h.bbox.scale||this.data[this.base].Get("largeop")||(v=w=0);var y=this.getValues("subscriptshift","superscriptshift"),z=this.HTMLgetMu(a);y.subscriptshift=""===y.subscriptshift?0:b.length2em(y.subscriptshift,z),y.superscriptshift=""===y.superscriptshift?0:b.length2em(y.superscriptshift,z);var A=0;if(o?A=o.bbox.w+x:p&&(A=p.bbox.w-x),0>A&&(A=0),b.placeBox(h,A,0),n||p)if(m||o){w=Math.max(w,b.TeX.sub2*f);var B=b.TeX.rule_thickness*f,C=(m||o).bbox.h,D=(n||p).bbox.d;o&&(C=Math.max(C,o.bbox.h)),p&&(D=Math.max(D,p.bbox.d)),3*B>v-D-(C-w)&&(w=3*B-v+D+C,t=.8*j-(v-D),t>0&&(v+=t,w-=t)),v=Math.max(v,y.superscriptshift),w=Math.max(w,y.subscriptshift),n&&b.placeBox(n,A+h.bbox.w+k,v),p&&b.placeBox(p,A+x-p.bbox.w,v),m&&b.placeBox(m,A+h.bbox.w+k-x,-w),o&&b.placeBox(o,A-o.bbox.w,-w)}else e=this.getValues("displaystyle","texprimestyle"),s=b.TeX[e.displaystyle?"sup1":e.texprimestyle?"sup3":"sup2"],v=Math.max(v,s*f,y.superscriptshift),n&&(v=Math.max(v,n.bbox.d+.25*j)),p&&(v=Math.max(v,p.bbox.d+.25*j)),n&&b.placeBox(n,A+h.bbox.w+k,v),p&&b.placeBox(p,0,v);else w=Math.max(w,b.TeX.sub1*f,y.subscriptshift),m&&(w=Math.max(w,m.bbox.h-.8*j)),o&&(w=Math.max(w,o.bbox.h-.8*j)),m&&b.placeBox(m,A+h.bbox.w+k-x,-w),o&&b.placeBox(o,0,-w);return this.HTMLhandleSpace(a),this.HTMLhandleColor(a),a},HTMLgetScripts:function(a,c){for(var d,e,f=[],g=1,h=this.data.length,i=0,j=0;4>j;j+=2){for(;h>g&&"mprescripts"!==this.data[g].type;){for(var k=j;j+2>k;k++)this.data[g]&&"none"!==this.data[g].type&&(f[k]||(f[k]=b.createBox(a),f[k].bbox=this.HTMLemptyBBox({}),i&&(b.createBlank(f[k],i),f[k].bbox.w=f[k].bbox.rw=i)),this.data[g].toHTML(f[k]),this.HTMLcombineBBoxes(this.data[g],f[k].bbox)),g++;e=f[j],d=f[j+1],e&&d&&(e.bbox.w<d.bbox.w?(b.createBlank(e,d.bbox.w-e.bbox.w),e.bbox.w=d.bbox.w,e.bbox.rw=Math.max(e.bbox.w,e.bbox.rw)):e.bbox.w>d.bbox.w&&(b.createBlank(d,e.bbox.w-d.bbox.w),d.bbox.w=e.bbox.w,d.bbox.rw=Math.max(d.bbox.w,d.bbox.rw))),e?i=e.bbox.w:d&&(i=d.bbox.w)}g++,i=0}for(k=0;4>k;k++)f[k]&&(f[k].bbox.w+=c,f[k].bbox.rw=Math.max(f[k].bbox.w,f[k].bbox.rw),this.HTMLcleanBBox(f[k].bbox));return f},HTMLstretchH:a.mbase.HTMLstretchH,HTMLstretchV:a.mbase.HTMLstretchV}),MathJax.Hub.Startup.signal.Post("HTML-CSS mmultiscripts Ready"),MathJax.Ajax.loadComplete(b.autoloadDir+"/mmultiscripts.js")});