!function(){function a(){i=!0,this.removeEventListener("DOMAttrModified",a,!1)}function b(a){return a.replace(g,function(a,b){return b.toUpperCase()})}function c(){var a={};return e.call(this.attributes,function(c){(d=c.name.match(f))&&(a[b(d[1])]=c.value)}),a}var d,e=[].forEach,f=/^data-(.+)/,g=/\-([a-z])/gi,h=document.createElement("div"),i=!1;void 0==h.dataset&&(h.addEventListener("DOMAttrModified",a,!1),h.setAttribute("foo","bar"),Element.prototype.__defineGetter__("dataset",i?function(){return this._datasetCache||(this._datasetCache=c.call(this)),this._datasetCache}:c),document.addEventListener("DOMAttrModified",function(a){delete a.target._datasetCache},!1))}();